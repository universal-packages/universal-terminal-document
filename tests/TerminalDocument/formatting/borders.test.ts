import stripAnsi from 'strip-ansi'

import { BlueColor, PurpleColor, RedColor, TerminalDocument } from '../../../src'

describe(TerminalDocument, () => {
  it('renders borders with a formatting', () => {
    const terminalDocument = new TerminalDocument({
      rows: [
        {
          blocks: [
            { text: 'Mjjm! Corre corre corre.. que nadie te pueda alcanzar', borderColor: RedColor.Crimson },
            { text: 'No me podras atrapar', align: 'center', borderColor: BlueColor.Navy },
            { text: 'SOY EL HOMBRE DE JENGIBRE!', align: 'right', borderColor: PurpleColor.MediumOrchid }
          ]
        }
      ],
      blockBorder: true,
      blockBorderStyle: 'dash-2-thick'
    })

    terminalDocument.render()

    // Check visually the output
    // console.log(terminalDocument.output)
    // console.log(JSON.stringify(terminalDocument.output.split('\n')))

    if (process.env.CI) {
      expect(stripAnsi(terminalDocument.output).split('\n')).toEqual([
        '┏╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍┓',
        '╏Mjjm! Corre corre corre.. ╏  No me podras atrapar   ╏         SOY EL HOMBRE DE╏',
        '╏que nadie te pueda        ╏                         ╏                JENGIBRE!╏',
        '╏alcanzar                  ╏                         ╏                         ╏',
        '┗╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍┻╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍┻╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍╍┛'
      ])
    } else {
      expect(terminalDocument.output.split('\n')).toEqual([
        '\u001b[38;2;220;20;60m┏\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m┳\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m┳\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m┓\u001b[39m',
        '\u001b[38;2;220;20;60m╏\u001b[39mMjjm! Corre corre corre.. \u001b[38;2;220;20;60m╏\u001b[39m  No me podras atrapar   \u001b[38;2;0;0;128m╏\u001b[39m         SOY EL HOMBRE DE\u001b[38;2;186;85;211m╏\u001b[39m',
        '\u001b[38;2;220;20;60m╏\u001b[39mque nadie te pueda        \u001b[38;2;220;20;60m╏\u001b[39m                         \u001b[38;2;0;0;128m╏\u001b[39m                JENGIBRE!\u001b[38;2;186;85;211m╏\u001b[39m',
        '\u001b[38;2;220;20;60m╏\u001b[39malcanzar                  \u001b[38;2;220;20;60m╏\u001b[39m                         \u001b[38;2;0;0;128m╏\u001b[39m                         \u001b[38;2;186;85;211m╏\u001b[39m',
        '\u001b[38;2;220;20;60m┗\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m╍\u001b[39m\u001b[38;2;220;20;60m┻\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m╍\u001b[39m\u001b[38;2;0;0;128m┻\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m╍\u001b[39m\u001b[38;2;186;85;211m┛\u001b[39m'
      ])
    }
  })
})
